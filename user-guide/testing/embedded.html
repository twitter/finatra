
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Embedded Servers and Apps &#8212; Finatra 20.4.0 documentation</title>
    <link rel="stylesheet" href="../../_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Feature Tests" href="feature_tests.html" />
    <link rel="prev" title="Testing Features" href="index.html" />
   
  
  <link media="only screen and (max-device-width: 480px)" href="../../_static/small_flask.css" type= "text/css" rel="stylesheet" />
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-39101739-4', 'twitter.github.io');
    ga('send', 'pageview');

  </script>

  </head><body>
  
  

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="feature_tests.html" title="Feature Tests"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Testing Features"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Finatra</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">User’s Guide</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="embedded-servers-and-apps">
<span id="embedded"></span><h1>Embedded Servers and Apps<a class="headerlink" href="#embedded-servers-and-apps" title="Permalink to this headline">¶</a></h1>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Please see the section on including test-jar dependencies in your project: <a class="reference external" href="../..#test-dependencies">Test Dependencies</a>.</p>
</div>
<p>Finatra provides a way to run an embedded version of your service or app running locally on ephemeral
ports. This allows you to run <em>actual</em> requests against an <em>actual</em> version of your server when testing.</p>
<p>The embedded utilities are also useful for testing and debugging your code when prototyping. If your
service or API makes calls to other services, instead of mocking out or overriding those dependencies
with dummy implementations you can always write a test using an Embedded version of your server which
talks to <em>real</em> downstream services (of course you’d never want to commit a test like this to your
source repository, especially if you run any type of <a class="reference external" href="https://en.wikipedia.org/wiki/Continuous_integration">continuous integration</a> system).
You’ll be able to run this test normally through the test runner of an IDE which would allow you to
easily set breakpoints and step-through code for debugging. As opposed to needing to build and run
your service locally and attach a remote debugger.</p>
<p>See:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/twitter/finatra/blob/develop/inject/inject-app/src/test/scala/com/twitter/inject/app/EmbeddedApp.scala">c.t.inject.app.EmbeddedApp</a></p></li>
<li><p><a class="reference external" href="https://github.com/twitter/finatra/blob/develop/inject/inject-server/src/test/scala/com/twitter/inject/server/EmbeddedTwitterServer.scala">c.t.inject.server.EmbeddedTwitterServer</a></p></li>
<li><p><a class="reference external" href="https://github.com/twitter/finatra/blob/develop/http/src/test/scala/com/twitter/finatra/http/EmbeddedHttpServer.scala">c.t.finatra.http.EmbeddedHttpServer</a></p></li>
<li><p><a class="reference external" href="https://github.com/twitter/finatra/blob/develop/thrift/src/test/scala/com/twitter/finatra/thrift/EmbeddedThriftServer.scala">c.t.finatra.thrift.EmbeddedThriftServer</a></p></li>
</ul>
<img alt="../../_images/embedded.png" src="../../_images/embedded.png" />
<p>You’ll notice that this hierarchy generally follows the server trait hierarchy as <a class="reference external" href="https://github.com/twitter/finatra/blob/develop/http/src/main/scala/com/twitter/finatra/http/HttpServer.scala"><cite>c.t.finatra.http.HttpServer</cite></a>
and <a class="reference external" href="https://github.com/twitter/twitter-server/blob/develop/src/main/scala/com/twitter/server/TwitterServer.scala"><cite>c.t.finatra.thrift.ThriftServer</cite></a> extend from <a class="reference external" href="https://github.com/twitter/twitter-server/blob/develop/src/main/scala/com/twitter/server/TwitterServer.scala"><cite>c.t.server.TwitterServer</cite></a> which extends from
<a class="reference external" href="https://github.com/twitter/util/blob/develop/util-app/src/main/scala/com/twitter/app/App.scala"><cite>c.t.app.App</cite></a>.</p>
<div class="section" id="testing-with-global-flags">
<h2>Testing With <cite>Global Flags</cite><a class="headerlink" href="#testing-with-global-flags" title="Permalink to this headline">¶</a></h2>
<p>The embedded servers and the embedded app allow for passing <a class="reference external" href="https://github.com/twitter/util">TwitterUtil</a> <a class="reference external" href="https://github.com/twitter/util/blob/1dd3e6228162c78498338b1c3aa11afe2f8cee22/util-app/src/main/scala/com/twitter/app/Flag.scala">Flags</a>
to the server under test via the <a class="reference external" href="https://github.com/twitter/finatra/blob/develop/inject/inject-server/src/test/scala/com/twitter/inject/server/EmbeddedTwitterServer.scala#L130">flags</a>
constructor argument (a map of flag name to flag value) which is meant to mimic setting flag values
via the command line.</p>
<p>However it is <strong>not recommended</strong> that users set any <a class="reference external" href="https://github.com/twitter/util/blob/f2a05474ec41f34146d710bdc2a789efd6da9d21/util-app/src/main/scala/com/twitter/app/GlobalFlag.scala"><cite>GlobalFlag</cite></a> value in this manner. In normal
usage, the value of a <a class="reference external" href="https://github.com/twitter/util/blob/f2a05474ec41f34146d710bdc2a789efd6da9d21/util-app/src/main/scala/com/twitter/app/GlobalFlag.scala"><cite>GlobalFlag</cite></a> is <strong>only read once during the initialization of the JVM process</strong>.</p>
<p>A <a class="reference external" href="https://github.com/twitter/util/blob/f2a05474ec41f34146d710bdc2a789efd6da9d21/util-app/src/main/scala/com/twitter/app/GlobalFlag.scala"><cite>GlobalFlag</cite></a> can now be scoped for the execution of an embedded server by passing in a value via the
<a class="reference external" href="https://github.com/twitter/finatra/blob/develop/inject/inject-server/src/test/scala/com/twitter/inject/server/EmbeddedTwitterServer.scala#L142">globalFlags</a>
arg of an embedded server. For example,</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">com.twitter.finatra.http.EmbeddedHttpServer</span>
<span class="k">import</span> <span class="nn">com.twitter.finagle.http.Status</span>
<span class="k">import</span> <span class="nn">com.twitter.inject.server.FeatureTest</span>

<span class="k">class</span> <span class="nc">ExampleServerFeatureTest</span> <span class="k">extends</span> <span class="nc">FeatureTest</span> <span class="o">{</span>
  <span class="k">override</span> <span class="k">val</span> <span class="n">server</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">EmbeddedHttpServer</span><span class="o">(</span>
    <span class="n">twitterServer</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">ExampleServer</span><span class="o">,</span>
    <span class="n">globalFlags</span> <span class="k">=</span> <span class="nc">ListMap</span><span class="o">(</span><span class="n">com</span><span class="o">.</span><span class="n">foo</span><span class="o">.</span><span class="n">bar</span><span class="o">.</span><span class="n">someGlobalFlag</span> <span class="o">-&gt;</span> <span class="s">&quot;a value&quot;</span><span class="o">)</span>
  <span class="o">)</span>

  <span class="n">test</span><span class="o">(</span><span class="s">&quot;ExampleServer#perform feature&quot;</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// any read of the `com.foo.bar.someGlobalFlag` value within the server will be &quot;a value&quot;</span>
    <span class="n">server</span><span class="o">.</span><span class="n">httpGet</span><span class="o">(</span>
      <span class="n">path</span> <span class="k">=</span> <span class="s">&quot;/&quot;</span><span class="o">,</span>
      <span class="n">andExpect</span> <span class="k">=</span> <span class="nc">Status</span><span class="o">.</span><span class="nc">Ok</span><span class="o">)</span>

    <span class="o">???</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>If you wish to test with toggled values of a <a class="reference external" href="https://github.com/twitter/util/blob/f2a05474ec41f34146d710bdc2a789efd6da9d21/util-app/src/main/scala/com/twitter/app/GlobalFlag.scala"><cite>GlobalFlag</cite></a> for an embedded app or server, you can
still use <a class="reference external" href="https://twitter.github.io/util/docs/com/twitter/app/Flag.html#let[R](t:T)(f:=%3ER):R"><cite>Flag.let</cite></a> or <a class="reference external" href="https://twitter.github.io/util/docs/com/twitter/app/Flag.html#letClear[R](f:=%3ER):R"><cite>Flag.letClear</cite></a> in tests. Note that if an embedded server takes
<a class="reference external" href="https://github.com/twitter/finatra/blob/develop/inject/inject-server/src/test/scala/com/twitter/inject/server/EmbeddedTwitterServer.scala#L142">globalFlags</a>
arguments, they will take precedents over an outer <a class="reference external" href="https://twitter.github.io/util/docs/com/twitter/app/Flag.html#let[R](t:T)(f:=%3ER):R"><cite>Flag.let</cite></a>. It is recommended to test using
<a class="reference external" href="https://twitter.github.io/util/docs/com/twitter/app/Flag.html#let[R](t:T)(f:=%3ER):R"><cite>Flag.let</cite></a> or <a class="reference external" href="https://twitter.github.io/util/docs/com/twitter/app/Flag.html#letClear[R](f:=%3ER):R"><cite>Flag.letClear</cite></a> on a <a class="reference external" href="https://github.com/twitter/util/blob/f2a05474ec41f34146d710bdc2a789efd6da9d21/util-app/src/main/scala/com/twitter/app/GlobalFlag.scala"><cite>GlobalFlag</cite></a> in places where the global flag value is read once and not
treated as a runtime variable, otherwise behavior can be unexpected across thread boundaries.
For example,</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">com.twitter.finatra.http.EmbeddedHttpServer</span>
<span class="k">import</span> <span class="nn">com.twitter.finagle.http.Status</span>
<span class="k">import</span> <span class="nn">com.twitter.inject.server.FeatureTest</span>

<span class="k">class</span> <span class="nc">ExampleServerFeatureTest</span> <span class="k">extends</span> <span class="nc">FeatureTest</span> <span class="o">{</span>
  <span class="k">override</span> <span class="k">val</span> <span class="n">server</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">EmbeddedHttpServer</span><span class="o">(</span>
    <span class="n">twitterServer</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">ExampleServer</span><span class="o">,</span>
    <span class="n">globalFlags</span> <span class="k">=</span> <span class="nc">ListMap</span><span class="o">(</span><span class="n">com</span><span class="o">.</span><span class="n">foo</span><span class="o">.</span><span class="n">bar</span><span class="o">.</span><span class="n">someGlobalFlag</span> <span class="o">-&gt;</span> <span class="s">&quot;a value&quot;</span><span class="o">)</span>
  <span class="o">)</span>

  <span class="n">test</span><span class="o">(</span><span class="s">&quot;ExampleServer#perform feature&quot;</span><span class="o">)</span> <span class="o">{</span>

    <span class="n">com</span><span class="o">.</span><span class="n">foo</span><span class="o">.</span><span class="n">bar</span><span class="o">.</span><span class="n">someGlobalFlag</span><span class="o">.</span><span class="n">let</span><span class="o">(</span><span class="s">&quot;b value&quot;</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// any read of the `com.foo.bar.someGlobalFlag` value in this closure will be &quot;b value&quot;</span>

      <span class="n">com</span><span class="o">.</span><span class="n">foo</span><span class="o">.</span><span class="n">bar</span><span class="o">.</span><span class="n">someGlobalFlag</span><span class="o">()</span> <span class="n">should</span> <span class="n">equal</span><span class="o">(</span><span class="s">&quot;b value&quot;</span><span class="o">)</span>

      <span class="c1">// except execution within the server will see &quot;a value&quot; due to `globalFlags` scope</span>
      <span class="n">server</span><span class="o">.</span><span class="n">httpGet</span><span class="o">(</span>
        <span class="n">path</span> <span class="k">=</span> <span class="s">&quot;/&quot;</span><span class="o">,</span>
        <span class="n">andExpect</span> <span class="k">=</span> <span class="nc">Status</span><span class="o">.</span><span class="nc">Ok</span><span class="o">)</span>

      <span class="o">???</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>See the <a class="reference external" href="https://twitter.github.io/util/docs/com/twitter/app/Flag.html">scaladoc</a> for <cite>c.t.app.Flag</cite>
for more information on using <a class="reference external" href="https://twitter.github.io/util/docs/com/twitter/app/Flag.html#let[R](t:T)(f:=%3ER):R"><cite>Flag.let</cite></a> or <a class="reference external" href="https://twitter.github.io/util/docs/com/twitter/app/Flag.html#letClear[R](f:=%3ER):R"><cite>Flag.letClear</cite></a>.</p>
</div>
<div class="section" id="inmemorystatsreceiver">
<h2>InMemoryStatsReceiver<a class="headerlink" href="#inmemorystatsreceiver" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="https://github.com/twitter/finatra/blob/develop/inject/inject-server/src/test/scala/com/twitter/inject/server/EmbeddedTwitterServer.scala"><cite>EmbeddedTwitterServer</cite></a> (and thus its subclasses: <a class="reference external" href="https://github.com/twitter/finatra/blob/develop/http/src/test/scala/com/twitter/finatra/http/EmbeddedHttpServer.scala"><cite>EmbeddedHttpServer</cite></a> and <a class="reference external" href="https://github.com/twitter/finatra/blob/develop/thrift/src/test/scala/com/twitter/finatra/thrift/EmbeddedThriftServer.scala"><cite>EmbeddedThriftServer</cite></a>)
binds an instance of the <a class="reference external" href="https://github.com/twitter/util/blob/develop/util-stats/src/main/scala/com/twitter/finagle/stats/InMemoryStatsReceiver.scala">com.twitter.finagle.stats.InMemoryStatsReceiver</a>
to the underlying server’s object graph (if the underlying server supports injection). This will
override any other bound implementation of a <a class="reference external" href="https://github.com/twitter/util/blob/develop/util-stats/src/main/scala/com/twitter/finagle/stats/StatsReceiver.scala">c.t.finagle.stats.StatsReceiver</a>
in the server’s object graph.</p>
<p>The <a class="reference external" href="https://github.com/twitter/finatra/blob/develop/inject/inject-server/src/test/scala/com/twitter/inject/server/EmbeddedTwitterServer.scala"><cite>EmbeddedTwitterServer</cite></a> exposes the bound <a class="reference external" href="https://github.com/twitter/util/blob/develop/util-stats/src/main/scala/com/twitter/finagle/stats/StatsReceiver.scala">StatsReceiver</a>
along with helper methods for asserting <a class="reference external" href="https://github.com/twitter/finatra/blob/c6e4716f082c0c8790d06d9e1664aacbd0c3fede/inject/inject-server/src/test/scala/com/twitter/inject/server/EmbeddedTwitterServer.scala#L323">counter</a>,
<a class="reference external" href="https://github.com/twitter/finatra/blob/c6e4716f082c0c8790d06d9e1664aacbd0c3fede/inject/inject-server/src/test/scala/com/twitter/inject/server/EmbeddedTwitterServer.scala#L335">stat</a>,
and <a class="reference external" href="https://github.com/twitter/finatra/blob/c6e4716f082c0c8790d06d9e1664aacbd0c3fede/inject/inject-server/src/test/scala/com/twitter/inject/server/EmbeddedTwitterServer.scala#L343">gauge</a>
values, such that you can expect behavior against the underlying server’s recorded stats in tests.</p>
<p><a class="reference external" href="#feature_tests">Feature Tests</a> also <a class="reference external" href="https://github.com/twitter/finatra/blob/c6e4716f082c0c8790d06d9e1664aacbd0c3fede/inject/inject-server/src/test/scala/com/twitter/inject/server/FeatureTestMixin.scala#L50">print all recorded stats</a>
to stdout after each test by default.</p>
<p>See: <a class="reference external" href="https://github.com/twitter/finatra/blob/develop/inject-thrift-client-http-mapper/src/test/scala/com/twitter/finatra/multiserver/test/MultiServerFeatureTest.scala">c.t.finatra.multiserver.test.MultiServerFeatureTest</a>
for an example usage.</p>
</div>
<div class="section" id="testing-a-c-t-inject-app-app">
<h2>Testing a <a class="reference external" href="https://github.com/twitter/finatra/blob/develop/inject/inject-app/src/main/scala/com/twitter/inject/app/App.scala"><cite>c.t.inject.app.App</cite></a><a class="headerlink" href="#testing-a-c-t-inject-app-app" title="Permalink to this headline">¶</a></h2>
<p>Finatra supports creating an <em>injectable</em> <cite>c.t.app.App</cite> (documentation <a class="reference external" href="../app/index.html">here</a>) with <a class="reference external" href="https://github.com/twitter/finatra/blob/develop/inject/inject-app/src/main/scala/com/twitter/inject/app/App.scala"><cite>c.t.inject.app.App</cite></a>. To test, simply wrap your <a class="reference external" href="https://github.com/twitter/finatra/blob/develop/inject/inject-app/src/main/scala/com/twitter/inject/app/App.scala"><cite>c.t.inject.app.App</cite></a> with an <a class="reference external" href="https://github.com/twitter/finatra/blob/develop/inject/inject-app/src/test/scala/com/twitter/inject/app/EmbeddedApp.scala">c.t.inject.app.EmbeddedApp</a>.</p>
<p>For example,</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">com.twitter.inject.Test</span>
<span class="k">import</span> <span class="nn">com.twitter.inject.app.EmbeddedApp</span>

<span class="k">class</span> <span class="nc">MyAppTest</span> <span class="k">extends</span> <span class="nc">Test</span> <span class="o">{</span>

  <span class="c1">// build an EmbeddedApp</span>
  <span class="k">def</span> <span class="n">newApp</span><span class="k">:</span> <span class="kt">EmbeddedApp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="nc">EmbeddedApp</span><span class="o">(</span><span class="k">new</span> <span class="nc">MyApp</span><span class="o">).</span><span class="n">bind</span><span class="o">[</span><span class="kt">Foo</span><span class="o">].</span><span class="n">toInstance</span><span class="o">(</span><span class="k">new</span> <span class="nc">Foo</span><span class="o">(</span><span class="mi">2</span><span class="o">))</span>

  <span class="n">test</span><span class="o">(</span><span class="s">&quot;MyApp#run&quot;</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">newApp</span><span class="o">.</span><span class="n">main</span><span class="o">(</span><span class="s">&quot;username&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;jack&quot;</span><span class="o">)</span>
  <span class="o">}</span>

  <span class="n">test</span><span class="o">(</span><span class="s">&quot;MyApp#works as expected&quot;</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">val</span> <span class="n">localTestInstanceApp</span> <span class="k">=</span> <span class="n">newApp</span>
    <span class="n">localTestInstanceApp</span><span class="o">.</span><span class="n">main</span><span class="o">(</span><span class="s">&quot;username&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;jill&quot;</span><span class="o">)</span>

    <span class="c1">// expect behavior against instances from the `localTestInstanceApp` injector</span>
    <span class="n">localTestInstanceApp</span><span class="o">.</span><span class="n">injector</span><span class="o">.</span><span class="n">instance</span><span class="o">[</span><span class="kt">Foo</span><span class="o">].</span><span class="n">value</span> <span class="n">should</span> <span class="n">be</span><span class="o">(</span><span class="nc">Foo</span><span class="o">(</span><span class="mi">2</span><span class="o">))</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Note: every call to <cite>EmbeddedApp#main</cite> will run the application with the given flags. If your application is stateful,
you may want to ensure that a new instance of your application under test (like written above) is created per
test run.</p>
</div>
</div>
<div class="section" id="more-information">
<h2>More Information<a class="headerlink" href="#more-information" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="index.html"><span class="doc">Testing Features</span></a></p></li>
<li><p><a class="reference internal" href="feature_tests.html"><span class="doc">Feature Tests</span></a></p></li>
<li><p><a class="reference internal" href="integration_tests.html"><span class="doc">Integration Tests</span></a></p></li>
<li><p><a class="reference internal" href="startup_tests.html"><span class="doc">Startup Tests</span></a></p></li>
<li><p><a class="reference internal" href="mixins.html"><span class="doc">Test Mixins</span></a></p></li>
<li><p><a class="reference internal" href="mocks.html"><span class="doc">Working with Mocks</span></a></p></li>
<li><p><a class="reference internal" href="override_modules.html"><span class="doc">Override Modules</span></a></p></li>
<li><p><a class="reference internal" href="bind_dsl.html"><span class="doc">Explicit Binding with #bind[T]</span></a></p></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p>
  <a href="https://github.com/twitter/finatra">Finatra</a> is a Scala services framework built on top of <a href="https://twitter.github.io/twitter-server/">TwitterServer</a> and <a href="https://twitter.github.io/finagle/">Finagle</a>.
</p>

<h3>Useful Links</h3>
<ul>
  <li><a href="https://twitter.github.io/finatra/user-guide">User's&nbsp;Guide</a></li>
  <li><a href="https://finagle.github.io/blog/">Finagle&nbsp;Blog</a></li>
  <li><a href="https://github.com/twitter/finatra">Finatra&nbsp;on&nbsp;Github</a></li>
  <li><a href="https://github.com/twitter/finatra/issues">Github&nbsp;Issues</a></li>
</ul>
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Embedded Servers and Apps</a><ul>
<li><a class="reference internal" href="#testing-with-global-flags">Testing With <cite>Global Flags</cite></a></li>
<li><a class="reference internal" href="#inmemorystatsreceiver">InMemoryStatsReceiver</a></li>
<li><a class="reference internal" href="#testing-a-c-t-inject-app-app">Testing a <cite>c.t.inject.app.App</cite></a></li>
<li><a class="reference internal" href="#more-information">More Information</a></li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">User’s Guide</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Testing Features</a></li>
      <li>Next: <a href="feature_tests.html" title="next chapter">Feature Tests</a></li>
  </ul></li>
  </ul></li>
</ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Search the contents of this site.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  
    <div class="github-fork-ribbon-wrapper right fixed" style="width: 150px;height: 150px;position: fixed;overflow: hidden;top: 0;z-index: 9999;pointer-events: none;right: 0;"><div class="github-fork-ribbon" style="position: absolute;padding: 2px 0;background-color: #900;background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));-webkit-box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.5);-moz-box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.5);box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.5);z-index: 9999;pointer-events: auto;top: 42px;right: -43px;-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);-ms-transform: rotate(45deg);-o-transform: rotate(45deg);transform: rotate(45deg);"><a target="_blank" href="https://github.com/twitter/finatra" style="font: 700 13px &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;color: #fff;text-decoration: none;text-shadow: 0 -1px rgba(0, 0, 0, 0.5);text-align: center;width: 200px;line-height: 20px;display: inline-block;padding: 2px 0;border-width: 1px 0;border-style: dotted;border-color: rgba(255, 255, 255, 0.7);">Fork me on GitHub</a></div></div>
  

  <div class="footer">
    &copy; Copyright 2013-2020 Twitter, Inc.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</div>
  
  </body>
</html>